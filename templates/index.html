<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>UnSNS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#1da1f2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-192.png') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <div class="logo" onclick="location.href='/';">UnSNS</div>
        <nav>
          <a href="{{ url_for('home') }}">Home</a>
          {% if session.get('user_id') %}
            <span>{{ session.get('username') }} さん</span>
            <a href="{{ url_for('logout') }}">ログアウト</a>
          {% else %}
            <a href="{{ url_for('login') }}">ログイン</a>
            <a href="{{ url_for('register') }}">新規登録</a>
          {% endif %}
        </nav>
      </header>
    <main>
        <section class="compose">
            <textarea id="tweet-content" placeholder="いまどうしてる？"></textarea>
            <button id="tweet-button">投稿</button>
        </section>
        <section class="feed" id="feed">
            <!-- Tweets will be appended here -->
        </section>
    </main>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('{{ url_for('static', filename='service-worker.js') }}')
            .catch(err => console.error('ServiceWorker registration failed:', err));
        });
      }
    </script>
</body>
</html>
